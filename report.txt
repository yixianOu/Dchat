一、选题的目的、意义（理论、现实）和国内外研究概况

（一）选题的目的和意义

  当今信息社会中，即时通讯应用已成为人们日常交流的重要工具。然而，传统的即时通讯系统普遍采用中心化服务器架构，存在以下问题：

1. 单点故障风险：中心服务器故障将导致整个系统瘫痪，用户无法进行通信
2. 隐私安全隐患：用户数据集中存储，易受攻击、监控和泄露
3. 扩展性受限：服务器容量限制了系统的用户规模和性能表现
4. 数据主权问题：用户数据由服务提供商控制，用户对自身数据缺乏控制权

本课题旨在设计并实现一个真正去中心化的端到端加密聊天系统，解决传统中心化架构的固有缺陷。主要目的包括：

1. 通过 NATS Routes 集群实现完全去中心化的网络架构，消除单点故障，提高系统可靠性
2. 采用 NaCl Box 和 AES-256-GCM 等军用级加密算法，保护用户通信隐私和数据安全
3. 实现 本地 SQLite 数据库持久化存储，支持完全动态链式组网
4. 通过 Wails v2 框架实现跨平台桌面应用，支持 Windows/macOS/Linux 多个操作系统

（二）国内外研究概况

  在分布式网络通信领域，已有许多相关研究。NATS 是一个高性能、低延迟的云原生消息传递系统，被广泛应用于分布式系统通信。NATS 官方文档详细介绍了其 Routes 集群机制，支持节点间对等通信和自动容错。

在去中心化通讯系统方面，有诸多研究和实践案例。分布式系统研究者通过多种架构模式（如发布-订阅、事件驱动等）实现了去中心化的消息传递。许多点对点（P2P）通讯系统采用分布式哈希表（DHT）实现节点发现，确保网络的高可用性。

在端到端加密技术方面，学术界已有成熟的理论基础。Signal Protocol 等成熟的加密协议被广泛应用于主流通讯应用。NaCl/libsodium 库提供了经过充分验证的密码学原语（X25519、XSalsa20-Poly1305），具有高度的安全性和可靠性。

在跨平台应用开发方面，Electron、React Native 等框架已被广泛应用。Wails 框架作为一个新兴的 Go + Web 技术栈方案，具有更小的应用体积和更低的内存占用，正在获得关注。

综合现有研究，本课题将 NATS Routes 分布式消息系统、NaCl 端到端加密、本地 SQLite 持久化存储和 Wails 跨平台框架有机结合，形成一个完整的去中心化加密聊天系统解决方案。


二、本课题的理论依据、研究内容和研究方法、步骤及进度安排

（一）本课题的理论依据

1. 分布式系统理论
  基于 NATS Routes 集群实现的去中心化架构采用分布式系统的经典设计理论。通过节点间对等通信和自动发现机制，确保系统的高可用性和容错能力。

2. 密码学理论
  NaCl Box 加密算法基于 Elliptic Curve Diffie-Hellman (ECDH) 密钥交换和 XSalsa20-Poly1305 对称加密，提供了 128 位的认证加密安全强度。AES-256-GCM 提供了 256 位的对称加密强度，符合 FIPS 140-2 政府级安全标准。

3. 消息队列理论
  NATS 的发布-订阅模式基于消息队列的经典理论，通过主题（Subject）路由和消息转发实现高效的消息传递。本地 SQLite 存储实现了分布式键值存储的持久化和容错机制。

（二）研究内容

为实现一个完整的去中心化加密聊天系统，本设计需实现以下核心内容：

1. 用户身份管理
   - 实现用户唯一标识和昵称设置
   - 支持 Curve25519 公私钥对生成（32 字节密钥长度）
   - 用户配置本地持久化存储

2. 加密通信功能
   - 实现私聊端到端加密（NaCl Box 算法：X25519 密钥交换 + XSalsa20-Poly1305）
   - 实现群聊对称加密（AES-256-GCM，256 位密钥）
   - 支持好友公钥和群组密钥管理

3. 消息收发功能
   - 支持实时消息发送和接收
   - 支持私聊和群聊两种模式
   - 消息加密传输和正确解密显示

4. 去中心化网络
   - 基于 NATS Routes 集群实现节点对等通信
   - 支持至少 2 个节点互联通信
   - 节点间消息正确路由和传递
   - 实现种子节点连接机制

5. 用户界面
   - 提供基本的聊天界面
   - 显示会话列表和消息记录
   - 提供密钥管理和设置功能

（三）研究方法

1. 理论研究
   - 深入学习 NATS Routes 的工作机制和链式动态加入原理
   - 研究 NaCl 和 AES-GCM 等加密算法的实现
   - 学习分布式系统的设计模式和容错机制

2. 系统设计
   - 设计整体系统架构（前后端分层、模块划分）
   - 设计 NATS 消息主题结构：dchat.dm.{cid}.msg（私聊）、dchat.grp.{gid}.msg（群聊）
   - 设计密钥管理流程和加密通信协议

3. 代码实现
   - 使用 Go 语言实现 NATS 客户端和聊天服务
   - 使用 Go crypto 库实现加密解密功能
   - 使用 React 和 TypeScript 开发前端用户界面
   - 使用 Wails v2 框架集成前后端

4. 测试与验证
   - 进行单元测试验证加密算法正确性
   - 进行集成测试验证多节点通信
   - 在多个操作系统平台进行功能测试

（四）步骤及进度安排

第一阶段：需求分析与架构设计（2025/9/1 - 2025/9/30，4周）
  1. 完成需求调研和文献阅读
  2. 完成系统架构设计

第二阶段：核心功能开发（2025/10/1 - 2026/1/31，16周）
  1. 搭建基础框架（Wails + NATS + SQLite）
  2. 实现端到端加密通信（私聊、群聊）
  3. 实现密钥管理和存储
  4. 配置 NATS Routes 集群
  5. 实现聊天功能和用户界面

第三阶段：测试与优化（2026/2/1 - 2026/3/31，8周）
  1. 功能测试和调试
  2. 跨平台编译和测试
  3. 性能优化

第四阶段：文档编写与答辩准备（2026/4/1 - 2026/4/20，3周）
  1. 编写项目文档和技术文档
  2. 准备答辩 PPT 和演示材料
  3. 最终检查和交付


三、本课题的重点、难点，预期结果和成果形式

（一）本课题的重点

1. 去中心化网络架构设计
   重点是理解 NATS Routes 集群的工作原理，实现节点间对等通信和自动发现机制。

2. 端到端加密通信实现
   重点是正确实现 NaCl Box 和 AES-256-GCM 加密算法，保证消息的安全性。

3. 密钥管理和持久化
   重点是设计合理的密钥生成、存储和交换机制，利用 SQLite 实现持久化。

4. 跨平台应用开发
   重点是掌握 Wails v2 框架，实现 Go 后端与 React 前端的无缝集成。

（二）本课题的难点

1. 跨 NAT 网络通信和链式动态组网
   NATS Routes 支持链式连接，但在实际网络中大部分节点在 NAT 后的局域网内，无法被直接访问。需要设计合理的公网引导节点 + 局域网客户端混合拓扑，同时保持完全的去中心化特性，确保任意节点故障不影响整体通信。

2. 端到端加密和密钥管理
   在去中心化环境中，私钥和密钥完全由用户本地管理，无法依赖中央服务器。需要设计安全的密钥生成、存储、分发和轮换机制，同时保证易用性，让用户能安全地在 SQLite 本地存储中管理密钥。

3. 去中心化状态一致性
   在没有中央服务器的情况下，确保用户会话状态、群组信息、消息历史等在去中心化网络中的一致性是困难的。需要通过 NATS 消息路由和本地 SQLite 存储的结合来实现状态管理。

4. 跨平台应用框架集成
   需要通过 Wails 框架实现 Go 后端与 React 前端的无缝集成，在保证安全性的同时，实现高效的数据绑定和事件处理，特别是在加密、密钥管理等敏感操作中。

（三）预期结果

1. 基本功能实现
   - 用户能够创建身份、生成密钥、设置昵称
   - 支持私聊和群聊的端到端加密通信
   - 至少 2 个节点能够成功组网并通信
   - 消息能够正确加密传输和解密显示

2. 性能指标
   - 应用启动时间 < 5 秒
   - 消息发送延迟 < 100 毫秒（局域网）
   - 支持至少 10 个节点同时在线

3. 安全性
   - 私聊消息实现端到端加密
   - 群聊消息实现对称加密
   - 密钥持久化和恢复正常工作

4. 跨平台兼容性
   - 在 Windows 和 Linux 平台编译成功
   - 应用在目标平台正常运行
   - 基本功能测试通过

（四）成果形式

1. 软件成果
   - 可执行的去中心化聊天应用程序（Windows/Linux）
   - 完整的项目源代码
   - 配置文件和使用示例

2. 文档成果
   - 系统设计文档（INTERFACE_DOCS.md）
   - 用户使用手册（README.md）
   - 测试报告和故障排除指南
   - API 文档和代码注释

3. 代码成果
   - 后端 Go 代码（聊天服务、NATS 客户端、加密模块、配置管理）
   - 前端 React 代码（聊天界面、密钥管理、用户设置）

4. 演示成果
   - 毕业答辩 PPT
   - 应用功能演示
   - 去中心化网络特性演示（多节点通信、节点容错）


参考文献

Bernstein, D. J. (2006). Curve25519: New Diffie-Hellman Speed Records. In International Workshop on Public Key Cryptography (pp. 207-228). Springer, Berlin, Heidelberg.
Lamport, L. (1998). The Part-Time Parliament. ACM Transactions on Computer Systems (TOCS), 16(2), 133-169.
Tanenbaum, A. S., & Van Steen, M. (2006). Distributed Systems: Principles and Paradigms (2nd ed.). Prentice Hall.
Coulouris, G., Dollimore, J., Kindberg, T., & Blair, G. (2011). Distributed Systems: Concepts and Design (5th ed.). Addison-Wesley.
Kurose, J. F., & Ross, K. W. (2012). Computer Networking (6th ed.). Pearson.
Menezes, A. J., Van Oorschot, P. C., & Vanstone, S. A. (1996). Handbook of Applied Cryptography. CRC Press.
Stallings, W. (2016). Cryptography and Network Security: Principles and Practice (6th ed.). Pearson.
Diffie, W., & Hellman, M. E. (1976). New Directions in Cryptography. IEEE Transactions on Information Theory, 22(6), 644-654.
Rivest, R. L., Shamir, A., & Adleman, L. (1978). A Method for Obtaining Digital Signatures and Public-Key Cryptosystems. Communications of the ACM, 21(2), 120-126.
