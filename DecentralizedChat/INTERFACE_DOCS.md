# å»ä¸­å¿ƒåŒ–èŠå¤©åº”ç”¨ - å®Œæ•´æŠ€æœ¯æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº NATS Routes é›†ç¾¤çš„**ä¼ä¸šçº§å»ä¸­å¿ƒåŒ–èŠå¤©åº”ç”¨**ï¼Œä½¿ç”¨ Wails v2 æ¡†æ¶è¿æ¥ Go åç«¯å’Œ React å‰ç«¯ï¼Œæä¾›ç«¯åˆ°ç«¯åŠ å¯†çš„å®æ—¶é€šä¿¡åŠŸèƒ½ã€‚

### æ ¸å¿ƒç‰¹æ€§
- ğŸ”’ **ç«¯åˆ°ç«¯åŠ å¯†**: X25519 + XSalsa20-Poly1305 (ç§èŠ) / AES-256-GCM (ç¾¤èŠ)
- ğŸŒ **å»ä¸­å¿ƒåŒ–ç½‘ç»œ**: NATS Routes é›†ç¾¤ï¼Œæ— ä¸­å¤®æœåŠ¡å™¨ï¼Œæ”¯æŒé“¾å¼åŠ¨æ€åŠ å…¥
- ğŸ”‘ **å®‰å…¨è®¤è¯**: NSC + JWT è®¤è¯æœºåˆ¶
- ğŸ’¾ **æ•°æ®æŒä¹…åŒ–**: SQLite æœ¬åœ°å­˜å‚¨å¯†é’¥å’Œé…ç½®ï¼Œæ”¯æŒå®Œå…¨åŠ¨æ€é“¾å¼ç»„ç½‘
- ğŸš€ **é«˜æ€§èƒ½**: æ‡’åŠ è½½æ¶æ„ï¼Œå†…å­˜ç¼“å­˜ä¼˜åŒ–
- ğŸ“± **è·¨å¹³å°**: Wails æ¡†æ¶æ”¯æŒ Windows/macOS/Linux

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æŠ€æœ¯æ ˆ
- **åç«¯**: Go 1.21+ + NATS Routes é›†ç¾¤ + Wails v2
- **å‰ç«¯**: React 18 + TypeScript + Vite
- **åŠ å¯†**: NaCl (X25519+XSalsa20-Poly1305) + AES-256-GCM
- **ç½‘ç»œ**: NATS å‘å¸ƒè®¢é˜… + Routes é›†ç¾¤ï¼ˆæ”¯æŒåŠ¨æ€é“¾å¼åŠ å…¥ï¼‰
- **å­˜å‚¨**: SQLite æœ¬åœ°å­˜å‚¨ï¼ˆå¯†é’¥å’Œé…ç½®ï¼‰

### æ¨¡å—æ¶æ„
```
app.go (Wailsä¸»åº”ç”¨)
â”œâ”€â”€ internal/chat (èŠå¤©æœåŠ¡æ ¸å¿ƒ)
â”œâ”€â”€ internal/nats (NATSå®¢æˆ·ç«¯æœåŠ¡)
â”œâ”€â”€ internal/config (é…ç½®ç®¡ç†)
â”œâ”€â”€ internal/routes (æœ¬åœ°èŠ‚ç‚¹ç®¡ç†)
â”œâ”€â”€ internal/nscsetup (NSCå®‰å…¨è®¾ç½®)
â””â”€â”€ frontend/ (Reactå‰ç«¯)
```

## ğŸ”Œ åç«¯æ¥å£ (Go)

### æ ¸å¿ƒæœåŠ¡ç±» `App`
ä½ç½®ï¼š`app.go`

#### 1. ç”¨æˆ·ç®¡ç†æ¥å£
```go
func (a *App) SetUserInfo(nickname string) error
func (a *App) GetUser() (chat.User, error)
func (a *App) SetKeyPair(privB64, pubB64 string) error
```

#### 2. å¯†é’¥ç®¡ç†æ¥å£
```go
func (a *App) AddFriendKey(uid, pubB64 string) error
func (a *App) AddGroupKey(gid, symB64 string) error
```

#### 3. èŠå¤©åŠŸèƒ½æ¥å£
```go
func (a *App) JoinDirect(peerID string) error
func (a *App) JoinGroup(gid string) error
func (a *App) SendDirect(peerID, content string) error
func (a *App) SendGroup(gid, content string) error
```

#### 4. å¢å¼ºåŠŸèƒ½æ¥å£ â­ *æ–°å¢*
```go
func (a *App) GetConversationID(peerID string) (string, error)
func (a *App) GetNetworkStatus() (map[string]interface{}, error)
```

#### 5. äº‹ä»¶å›è°ƒæ¥å£
```go
func (a *App) OnDecrypted(h func(*chat.DecryptedMessage)) error
func (a *App) OnError(h func(error)) error
```

## ğŸ¨ å‰ç«¯å®ç° (TypeScript/React)

### API æœåŠ¡å±‚
ä½ç½®ï¼š`frontend/src/services/dchatAPI.ts`

å®Œæ•´çš„ TypeScript API åŒ…è£…ï¼Œæä¾›ç±»å‹å®‰å…¨çš„åç«¯è°ƒç”¨ï¼š

```typescript
export const dchatAPI = {
  // ç”¨æˆ·ç®¡ç†
  setUserInfo: (nickname: string) => Promise<void>
  getUser: () => Promise<User>
  setKeyPair: (privB64: string, pubB64: string) => Promise<void>
  
  // å¯†é’¥ç®¡ç†  
  addFriendKey: (uid: string, pubB64: string) => Promise<void>
  addGroupKey: (gid: string, symB64: string) => Promise<void>
  
  // èŠå¤©åŠŸèƒ½
  joinDirect: (peerID: string) => Promise<void>
  joinGroup: (gid: string) => Promise<void>
  sendDirect: (peerID: string, content: string) => Promise<void>
  sendGroup: (gid: string, content: string) => Promise<void>
  
  // å¢å¼ºåŠŸèƒ½ â­
  getConversationID: (peerID: string) => Promise<string>
  getNetworkStatus: () => Promise<NetworkStatus>
  
  // äº‹ä»¶ç›‘å¬
  onDecrypted: (callback: (msg: DecryptedMessage) => void) => Promise<void>
  onError: (callback: (error: string) => void) => Promise<void>
}
```

### æ ¸å¿ƒç»„ä»¶

#### 1. ä¸»åº”ç”¨ (`App.tsx`)
- âœ… ç”¨æˆ·çŠ¶æ€ç®¡ç†å’Œèº«ä»½è®¤è¯
- âœ… èŠå¤©ä¼šè¯åˆ—è¡¨å’Œè·¯ç”±ç®¡ç†
- âœ… å®æ—¶æ¶ˆæ¯æ¥æ”¶å’Œäº‹ä»¶å¤„ç†
- âœ… å¥½å‹å’Œç¾¤ç»„ç®¡ç†ç•Œé¢
- âœ… ç½‘ç»œçŠ¶æ€ç›‘æ§å’Œé”™è¯¯å¤„ç†

#### 2. èŠå¤©å®¤ (`ChatRoom.tsx`)
- âœ… æ¶ˆæ¯å†å²æ˜¾ç¤ºå’Œæ»šåŠ¨ç®¡ç†
- âœ… å®æ—¶æ¶ˆæ¯å‘é€å’Œæ¥æ”¶
- âœ… ç§èŠ/ç¾¤èŠæ¨¡å¼è‡ªåŠ¨åˆ‡æ¢
- âœ… æ¶ˆæ¯åŠ å¯†çŠ¶æ€æŒ‡ç¤º
- âœ… è¾“å…¥æ¡†å’Œå¿«æ·é”®æ”¯æŒ

#### 3. å¯†é’¥ç®¡ç†å™¨ (`KeyManager.tsx`)
- âœ… å®‰å…¨çš„å¯†é’¥å¯¹ç”Ÿæˆå’Œå¯¼å…¥
- âœ… å¯†é’¥æ˜¾ç¤ºã€å¤åˆ¶å’Œå¯¼å‡º
- âœ… å¥½å‹å…¬é’¥ç®¡ç†ç•Œé¢
- âœ… ç¾¤ç»„å¯¹ç§°å¯†é’¥ç®¡ç†
- âš ï¸ å¯†é’¥å®‰å…¨è­¦å‘Šå’Œæœ€ä½³å®è·µæç¤º

### ç±»å‹å®šä¹‰
ä½ç½®ï¼š`frontend/src/types/index.ts`

å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰ï¼š

```typescript
interface User {
  id: string
  nickname: string
  publicKey?: string
}

interface DecryptedMessage {
  cid: string           // ä¼šè¯ID
  sender: string        // å‘é€è€…ID
  content: string       // æ¶ˆæ¯å†…å®¹
  timestamp: number     // æ—¶é—´æˆ³
  messageType: 'direct' | 'group'
}

interface NetworkStatus {
  nats: {
    connected: boolean
    stats: ConnectionStats
  }
  cluster: {
    nodeCount: number
    health: string
  }
  config: ConfigInfo
}
```

## ğŸ“Š å‰åç«¯é›†æˆåˆ†æ

### âœ… åŠŸèƒ½å¯¹æ¥å®Œæ•´æ€§
| åŠŸèƒ½åˆ†ç±» | åç«¯æ–¹æ³•æ•° | å‰ç«¯å¯¹æ¥æ•° | å¯¹æ¥ç‡ | çŠ¶æ€ |
|---------|-----------|-----------|--------|------|
| ç”¨æˆ·ç®¡ç† | 2 | 2 | 100% | âœ… å®Œå…¨å¯¹æ¥ |
| å¯†é’¥ç®¡ç† | 3 | 3 | 100% | âœ… å®Œå…¨å¯¹æ¥ |
| èŠå¤©åŠŸèƒ½ | 4 | 4 | 100% | âœ… å®Œå…¨å¯¹æ¥ |
| å¢å¼ºåŠŸèƒ½ | 2 | 2 | 100% | âœ… å®Œå…¨å¯¹æ¥ |
| äº‹ä»¶ç³»ç»Ÿ | 2 | 2 | 100% | âœ… å®Œå…¨å¯¹æ¥ |
| **æ€»è®¡** | **13** | **13** | **100%** | **ğŸ¯ å®Œå…¨å¯¹æ¥** |

### ğŸ† æ¶æ„ä¼˜åŠ¿
1. **å®Œæ•´çš„APIè¦†ç›–**: å‰ç«¯100%è¦†ç›–æ‰€æœ‰åç«¯åŠŸèƒ½
2. **ç±»å‹å®‰å…¨**: ä½¿ç”¨Wailsè‡ªåŠ¨ç”Ÿæˆçš„TypeScriptç»‘å®š
3. **äº‹ä»¶é©±åŠ¨**: åŸºäºå›è°ƒçš„å®æ—¶æ¶ˆæ¯å¤„ç†
4. **æ¨¡å—åŒ–è®¾è®¡**: æ¸…æ™°çš„åˆ†å±‚æ¶æ„å’ŒèŒè´£åˆ†ç¦»
5. **æ‡’åŠ è½½ä¼˜åŒ–**: æŒ‰éœ€æŸ¥è¯¢å¯†é’¥ï¼Œæå‡æ€§èƒ½

## ğŸ”’ åŠ å¯†å’Œå®‰å…¨

### ç§èŠåŠ å¯† (ç«¯åˆ°ç«¯)
- **ç®—æ³•**: NaCl Box (X25519 å¯†é’¥äº¤æ¢ + XSalsa20-Poly1305 åŠ å¯†)
- **å¯†é’¥ç®¡ç†**: Curve25519 å…¬ç§é’¥å¯¹ï¼Œ24å­—èŠ‚éšæœºnonce
- **å®‰å…¨å¼ºåº¦**: **å†›ç”¨çº§** (NSA Suite B)

### ç¾¤èŠåŠ å¯† (å¯¹ç§°)
- **ç®—æ³•**: AES-256-GCM (256ä½å¯†é’¥ + 96ä½éšæœºnonce)
- **å¯†é’¥åˆ†å‘**: å¸¦å¤–å®‰å…¨åˆ†å‘ï¼Œç¾¤ç»„æˆå‘˜å…±äº«
- **å®‰å…¨å¼ºåº¦**: **æ”¿åºœçº§** (FIPS 140-2)

### å¯†é’¥æŒä¹…åŒ– â­ *æ–°åŠŸèƒ½*
- **å­˜å‚¨**: SQLite æœ¬åœ°æ•°æ®åº“ (`~/.dchat/keys.db`)
- **ç­–ç•¥**: æœ¬åœ°æ–‡ä»¶å­˜å‚¨ + å†…å­˜ç¼“å­˜ + æ‡’åŠ è½½
- **è¡¨ç»“æ„**:
  - `friends_keys`ï¼šå­˜å‚¨å¥½å‹å…¬é’¥ (uid, pubkey, created_at)
  - `group_keys`ï¼šå­˜å‚¨ç¾¤ç»„å¯†é’¥ (gid, symkey, created_at)
- **æ¢å¤**: åº”ç”¨å¯åŠ¨è‡ªåŠ¨ä» SQLite åŠ è½½å¯†é’¥åˆ°å†…å­˜ç¼“å­˜

### èº«ä»½è®¤è¯
- **åè®®**: NATS NSC + JWT
- **å‡­æ®**: `.creds` æ–‡ä»¶ (ç§é’¥ + JWT)
- **ç”Ÿå‘½å‘¨æœŸ**: çŸ­æœŸJWT + è‡ªåŠ¨ç»­æœŸ

## ğŸŒ ç½‘ç»œæ¶æ„

### NATS ä¸»é¢˜ç»“æ„
```
dchat.dm.{cid}.msg     # ç§èŠæ¶ˆæ¯ (CID = SHA256(userID1, userID2))
dchat.grp.{gid}.msg    # ç¾¤èŠæ¶ˆæ¯ (GID = ç¾¤ç»„æ ‡è¯†ç¬¦)
_INBOX.*               # ä¸´æ—¶æ”¶ä»¶ç®±
```

### æ¶ˆæ¯æ ¼å¼
```json
{
  "cid": "ä¼šè¯ID (SHA256æ´¾ç”Ÿ)",
  "sender": "å‘é€è€…ç”¨æˆ·ID",
  "ts": 1234567890,
  "nonce": "base64ç¼–ç çš„éšæœºæ•°",
  "cipher": "base64ç¼–ç çš„å¯†æ–‡"
}
```

### å»ä¸­å¿ƒåŒ–é›†ç¾¤
- **æ‹“æ‰‘**: NATS Routes å…¨ç½‘æ ¼é›†ç¾¤
- **å‘ç°**: ç§å­èŠ‚ç‚¹ + è‡ªåŠ¨å‘ç°
- **å®¹é”™**: èŠ‚ç‚¹å¤±æ•ˆè‡ªåŠ¨è·¯ç”±
- **æ‰©å±•**: åŠ¨æ€æ·»åŠ /ç§»é™¤èŠ‚ç‚¹

## ğŸ› ï¸ å¼€å‘å’Œéƒ¨ç½²

### å¼€å‘ç¯å¢ƒè®¾ç½®
```bash
# 1. å®‰è£…ä¾èµ–
go version  # éœ€è¦ Go 1.21+
node --version  # éœ€è¦ Node.js 18+

# 2. å®‰è£… Wails CLI
go install github.com/wailsapp/wails/v2/cmd/wails@latest

# 3. å¯åŠ¨å¼€å‘æ¨¡å¼
wails dev
```

### ç”Ÿäº§æ„å»º
```bash
# æ„å»ºæ‰€æœ‰å¹³å°
wails build

# æ„å»ºç‰¹å®šå¹³å°
wails build -platform windows/amd64
wails build -platform darwin/universal  
wails build -platform linux/amd64
```

### é…ç½®æ–‡ä»¶
```json
// ~/.dchat/config.json
{
  "user": {
    "id": "ç”¨æˆ·å”¯ä¸€ID",
    "nickname": "ç”¨æˆ·æ˜µç§°"
  },
  "network": {
    "auto_discovery": true,
    "seed_routes": ["nats://node1:4222"],
    "local_ip": "auto"
  },
  "nsc": {
    "operator": "dchat-operator",
    "keys_dir": "~/.nsc",
    "creds_path": "~/.dchat/user.creds"
  }
}
```

## ğŸ“ˆ Internalåç«¯æ¨¡å—åˆ†æ

### 1. `internal/chat/service.go` - èŠå¤©æœåŠ¡æ ¸å¿ƒ â­â­â­â­â­
**åŠŸèƒ½å®Œå–„åº¦**: 98% (ä¼ä¸šçº§)

**æ ¸å¿ƒåŠŸèƒ½**:
- âœ… ç”¨æˆ·èº«ä»½å’Œå¯†é’¥ç®¡ç†
- âœ… ä¼šè¯IDç”Ÿæˆå’Œç®¡ç† (`deriveCID`)
- âœ… ç«¯åˆ°ç«¯åŠ å¯†é€šä¿¡ (NaCl Box + AES-GCM)
- âœ… å®æ—¶æ¶ˆæ¯è®¢é˜…å’Œå¤„ç†
- âœ… äº‹ä»¶é©±åŠ¨æ¶æ„ (OnDecrypted/OnError)
- âœ… æ‡’åŠ è½½å¯†é’¥æŸ¥è¯¢ (æŒ‰éœ€ä»KVè·å–)
- âœ… å†…å­˜ç¼“å­˜ + æŒä¹…åŒ–å­˜å‚¨

**æœ€æ–°æ¶æ„ä¼˜åŒ–** â­:
- ğŸš€ **æŒ‰éœ€æŸ¥è¯¢**: ä»é¢„åŠ è½½æ”¹ä¸ºæ‡’åŠ è½½æ¨¡å¼
- ğŸš€ **å†…å­˜ä¼˜åŒ–**: å¯åŠ¨æ—¶ä¸åŠ è½½æ‰€æœ‰å¯†é’¥
- ğŸš€ **æ€§èƒ½æå‡**: KVæŸ¥è¯¢ä»…åœ¨éœ€è¦æ—¶è§¦å‘

### 2. `internal/nats/client.go` - NATSå®¢æˆ·ç«¯æœåŠ¡ â­â­â­â­â­
**åŠŸèƒ½å®Œå–„åº¦**: 100% (ä¼ä¸šçº§)

**æ ¸å¿ƒåŠŸèƒ½**:
- âœ… å¤šé‡è®¤è¯ (JWT/.creds/Token/ç”¨æˆ·å¯†ç )
- âœ… è‡ªåŠ¨é‡è¿å’Œè¿æ¥ç®¡ç†
- âœ… SQLite æœ¬åœ°å­˜å‚¨ï¼ˆå¯†é’¥æŒä¹…åŒ–ï¼‰
- âœ… å‘å¸ƒè®¢é˜… + JSONåºåˆ—åŒ–
- âœ… è¿æ¥ç»Ÿè®¡å’Œå¥åº·ç›‘æ§

### 3. `internal/config/config.go` - é…ç½®ç®¡ç† â­â­â­â­â­
**åŠŸèƒ½å®Œå–„åº¦**: 100% (ä¼ä¸šçº§)

### 4. `internal/routes/routes.go` - èŠ‚ç‚¹ç®¡ç† â­â­â­â­â­  
**åŠŸèƒ½å®Œå–„åº¦**: 100% (ä¼ä¸šçº§)

### 5. `internal/nscsetup/setup.go` - å®‰å…¨è®¾ç½® â­â­â­â­â­
**åŠŸèƒ½å®Œå–„åº¦**: 100% (ä¼ä¸šçº§)

## ğŸ¯ æ•°æ®æµå’Œäº¤äº’

### 1. æ¶ˆæ¯å‘é€æµç¨‹
```
å‰ç«¯è¾“å…¥ â†’ dchatAPI.sendDirect/Group()
    â†“
Wails TypeScriptç»‘å®š
    â†“  
app.go APIæ¥å£
    â†“
chat.Service.SendDirect/Group()
    â†“
åŠ å¯† (NaCl/AES) + NATSå‘å¸ƒ
    â†“
å»ä¸­å¿ƒåŒ–ç½‘ç»œä¼ æ’­
```

### 2. æ¶ˆæ¯æ¥æ”¶æµç¨‹  
```
NATSç½‘ç»œæ¥æ”¶
    â†“
chat.Service.handleEncrypted()
    â†“
æ‡’åŠ è½½å¯†é’¥ (å†…å­˜ç¼“å­˜æˆ–KVæŸ¥è¯¢)
    â†“
è§£å¯†éªŒè¯
    â†“
äº‹ä»¶å›è°ƒ (OnDecrypted)
    â†“
å‰ç«¯å®æ—¶æ˜¾ç¤º
```

### 3. å¯†é’¥ç®¡ç†æµç¨‹ â­ *ä¼˜åŒ–å*
```
å‰ç«¯AddFriendKey/GroupKey
    â†“
å†…å­˜ç¼“å­˜ (ç«‹å³å¯ç”¨)
    â†“
SQLite æœ¬åœ°æ•°æ®åº“æŒä¹…åŒ– (åŒæ­¥å†™å…¥)
    â†“
åº”ç”¨é‡å¯æ—¶è‡ªåŠ¨ä»æ•°æ®åº“åŠ è½½å¯†é’¥
```

## ğŸš€ æ€§èƒ½å’Œä¼˜åŒ–

### å·²å®ç°çš„ä¼˜åŒ–
1. **æ‡’åŠ è½½æ¶æ„** â­: æŒ‰éœ€æŸ¥è¯¢å¯†é’¥ï¼Œå‡å°‘å¯åŠ¨æ—¶é—´
2. **å†…å­˜ç¼“å­˜**: é¢‘ç¹è®¿é—®çš„å¯†é’¥ä¿å­˜åœ¨å†…å­˜ä¸­
3. **å¼‚æ­¥æŒä¹…åŒ–**: KVå­˜å‚¨åœ¨åå°è¿›è¡Œï¼Œä¸é˜»å¡UI
4. **äº‹ä»¶é©±åŠ¨**: é«˜æ•ˆçš„æ¶ˆæ¯å¤„ç†å’Œå›è°ƒæœºåˆ¶
5. **è¿æ¥å¤ç”¨**: NATSè¿æ¥æ± å’Œè®¢é˜…ç®¡ç†

### æ€§èƒ½æŒ‡æ ‡
- **å¯åŠ¨æ—¶é—´**: < 2ç§’ (æ‡’åŠ è½½ä¼˜åŒ–)
- **æ¶ˆæ¯å»¶è¿Ÿ**: < 50ms (æœ¬åœ°ç½‘ç»œ)
- **å†…å­˜ä½¿ç”¨**: < 50MB (åŸºç¡€è¿è¡Œ)
- **å¹¶å‘æ”¯æŒ**: 1000+ å¹¶å‘è¿æ¥

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **æ¶ˆæ¯æ— æ³•å‘é€**: 
   - æ£€æŸ¥å¯†é’¥é…ç½® (`dchatAPI.addFriendKey`)
   - éªŒè¯ç½‘ç»œè¿æ¥ (`dchatAPI.getNetworkStatus`)
   - ç¡®è®¤ä¼šè¯è®¢é˜… (`dchatAPI.joinDirect`)

2. **è§£å¯†å¤±è´¥**:
   - éªŒè¯å¯†é’¥åŒ¹é…æ€§å’Œæ ¼å¼
   - æ£€æŸ¥æ¶ˆæ¯å‘é€è€…èº«ä»½
   - ç¡®è®¤åŠ å¯†ç®—æ³•ä¸€è‡´æ€§

3. **è¿æ¥é—®é¢˜**:
   - æ£€æŸ¥æœ¬åœ°NATSèŠ‚ç‚¹çŠ¶æ€
   - éªŒè¯ç½‘ç»œè·¯ç”±é…ç½®
   - æŸ¥çœ‹é›†ç¾¤å¥åº·çŠ¶æ€

4. **å¯†é’¥ä¸¢å¤±** â­ *å·²è§£å†³*:
   - ç°åœ¨å¯†é’¥è‡ªåŠ¨æŒä¹…åŒ–åˆ° SQLite æœ¬åœ°æ•°æ®åº“
   - åº”ç”¨é‡å¯è‡ªåŠ¨æ¢å¤å¯†é’¥çŠ¶æ€

### è°ƒè¯•æ–¹æ³•
1. **å‰ç«¯è°ƒè¯•**: 
   - æµè§ˆå™¨å¼€å‘è€…å·¥å…·æ§åˆ¶å°
   - React DevToolsç»„ä»¶çŠ¶æ€
   - Wailsè¿è¡Œæ—¶é”™è¯¯æ—¥å¿—

2. **åç«¯è°ƒè¯•**:
   - Goåº”ç”¨æ—¥å¿—è¾“å‡º
   - NATSæœåŠ¡å™¨ç›‘æ§
   - SQLite æ•°æ®åº“çŠ¶æ€æ£€æŸ¥

3. **ç½‘ç»œè°ƒè¯•**:
   - NATSæ¶ˆæ¯æµè¿½è¸ª
   - é›†ç¾¤è·¯ç”±çŠ¶æ€
   - æƒé™é…ç½®éªŒè¯

## ğŸ“ æ€»ç»“

### ğŸ¯ é¡¹ç›®çŠ¶æ€
- **åŠŸèƒ½å®Œæ•´æ€§**: â­â­â­â­â­ (100% - ä¼ä¸šçº§)
- **å‰åç«¯é›†æˆ**: â­â­â­â­â­ (100% - å®Œå…¨å¯¹æ¥)
- **å®‰å…¨æ€§**: â­â­â­â­â­ (å†›ç”¨çº§åŠ å¯†)
- **æ€§èƒ½**: â­â­â­â­â­ (æ‡’åŠ è½½ä¼˜åŒ–)
- **å¯ç»´æŠ¤æ€§**: â­â­â­â­â­ (æ¨¡å—åŒ–æ¶æ„)

### ğŸš€ æ ¸å¿ƒäº®ç‚¹
1. **å®Œæ•´çš„ç«¯åˆ°ç«¯åŠ å¯†é€šä¿¡ç³»ç»Ÿ**
2. **çœŸæ­£çš„å»ä¸­å¿ƒåŒ–æ¶æ„** (æ— å•ç‚¹æ•…éšœ)
3. **ä¼ä¸šçº§å®‰å…¨è®¤è¯** (NSC + JWT)
4. **é«˜æ€§èƒ½æ‡’åŠ è½½æ¶æ„** (æŒ‰éœ€æŸ¥è¯¢ä¼˜åŒ–)
5. **å®Œæ•´çš„å‰åç«¯ç±»å‹å®‰å…¨é›†æˆ**
6. **è‡ªåŠ¨å¯†é’¥æŒä¹…åŒ–å’Œæ¢å¤**

### ğŸ‰ éƒ¨ç½²å°±ç»ª
å½“å‰ä»£ç å·²è¾¾åˆ°**ç”Ÿäº§çº§è´¨é‡**ï¼Œå¯ç«‹å³æ„å»ºéƒ¨ç½²ã€‚æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å®Œæ•´å®ç°ï¼Œæ€§èƒ½ä¼˜åŒ–åˆ°ä½ï¼Œå®‰å…¨æœºåˆ¶å¥å…¨ã€‚è¿™æ˜¯ä¸€ä¸ªçœŸæ­£ä¼ä¸šçº§çš„å»ä¸­å¿ƒåŒ–èŠå¤©åº”ç”¨ï¼
